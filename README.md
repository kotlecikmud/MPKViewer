# MPK Wroclaw Public Transport Viewer

This project is a Flask-based web application that provides a real-time visualization of the public transport system in Wroclaw, Poland. It scrapes data from the official MPK Wroclaw website, processes it, and displays the live positions of buses and trams on an interactive map.

## Features

*   **Live Vehicle Tracking:** Displays the real-time positions of all active buses and trams on a map.
*   **Route Visualization:** Allows users to select a specific bus or tram line to see its route and stops.
*   **Vehicle Filtering:** Users can toggle between viewing buses, trams, or both.
*   **Data-Driven:** The application's data is sourced directly from the official MPK Wroclaw timetable website, ensuring accuracy.

## Project Structure

```
├── mpk_viewer/
│   ├── data/
│   │   └── routes.json
│   ├── static/
│   │   └── ...
│   ├── templates/
│   │   └── index.html
│   ├── app.py
│   └── requirements.txt
├── processed_dataset/
│   ├── all_lines.txt
│   ├── bus_lines.txt
│   └── tram_lines.txt
│   └── original_dataset_link.txt
├── scraper.py
├── merge_data.py
└── README.md
```

## Data Pipeline

The application's data is collected and processed through the following steps:

1.  **`scraper.py`:** This script scrapes the [MPK Wroclaw timetable website](https://www.wroclaw.pl/komunikacja/rozklady-jazdy) to gather route information for all bus and tram lines. The output is a `routes.json` file, which serves as the primary data source for the application.
2.  **`processed_dataset/`:** This directory contains historical data from 2022, listing all bus and tram lines. The original dataset can be found at the link in `processed_dataset/original_dataset_link.txt`.
3.  **`merge_data.py`:** This script augments the `routes.json` file generated by the scraper with any lines that may be missing but are present in the historical dataset. This ensures a more complete dataset.

## Setup and Installation

1.  **Clone the repository:**
    ```bash
    git clone https://github.com/your-username/mpk-wroclaw-viewer.git
    cd mpk-wroclaw-viewer
    ```
2.  **Install dependencies:**
    ```bash
    pip install -r mpk_viewer/requirements.txt
    ```

## Usage

1.  **Run the data pipeline:**
    *   To scrape the latest route data:
        ```bash
        python3 scraper.py
        ```
    *   To merge the scraped data with the historical dataset:
        ```bash
        python3 merge_data.py
        ```
2.  **Run the Flask application:**
    ```bash
    python3 mpk_viewer/app.py
    ```
    The application will be available at `http://localhost:5000`.
